"use strict";(self.webpackChunkquestionnaire=self.webpackChunkquestionnaire||[]).push([[762],{45722:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var s=n(72791),i=n(14692),c=n(35549),o=n(2641),a=n(57689),d=n(62618),r=n(91669),l=n(12044),p=n(22057),x=n(53696),u=n(46988),j=n(71046),m=n(86005),h=n(61431),C=n(69228),_=n(23414),f=n(25561),S=n(76864);const v="StatHeader_header-wrapper__OdJqN",Z="StatHeader_header__eh3Eb";var y=n(80184);const{Title:g}=x.default,w=()=>{const e=(0,a.s0)(),{title:t}=(0,l.Z)(),{id:n}=(0,a.UO)(),i=(0,s.useRef)(null);function c(){const e=i.current;e&&(e.select(),document.execCommand("copy"),u.ZP.success("\u62f7\u8d1d\u6210\u529f\ud83d\ude0a"))}const d=(0,s.useMemo)((()=>{const e="http://localhost:3000/question/".concat(n),t=(0,y.jsx)("div",{children:(0,y.jsx)(p.ZP,{value:e,size:150})});return(0,y.jsxs)(j.Z,{children:[(0,y.jsx)(m.default,{value:e,style:{width:"300px"},ref:i}),(0,y.jsx)(h.Z,{title:"\u62f7\u8d1d\u94fe\u63a5",children:(0,y.jsx)(o.ZP,{icon:(0,y.jsx)(_.Z,{}),onClick:c})}),(0,y.jsx)(C.Z,{content:t,children:(0,y.jsx)(o.ZP,{icon:(0,y.jsx)(f.Z,{})})})]})}),[n]);return(0,y.jsx)("div",{className:v,children:(0,y.jsxs)("div",{className:Z,children:[(0,y.jsx)("div",{children:(0,y.jsxs)(j.Z,{children:[(0,y.jsx)(o.ZP,{type:"link",icon:(0,y.jsx)(S.Z,{}),onClick:()=>e(-1),children:"\u8fd4\u56de"}),(0,y.jsx)(g,{children:t})]})}),(0,y.jsx)("div",{children:d}),(0,y.jsx)("div",{children:(0,y.jsx)(o.ZP,{type:"primary",onClick:()=>e("/question/edit/".concat(n)),children:"\u7f16\u8f91\u95ee\u5377"})})]})})},I="Stat_container__3jCj8",N="Stat_content-wrapper__wNYlg",k="Stat_content__rASIu",T="Stat_left__2aZMU",P="Stat_main__+CW-0",q="Stat_right__dqMPG";var L=n(81694),b=n.n(L),F=n(42573);const z="ComponentList_container__ixnwF",A="ComponentList_container-wrapper__6pVuD",O="ComponentList_selected__qK6tK",U="ComponentList_component__IF89K";var H=n(61554);const K=e=>{const{selectedComponentId:t,setSelectedComponentId:n,setSelectedComponentType:s}=e,{componentList:i}=(0,F.Z)();return(0,y.jsx)("div",{className:z,children:i.filter((e=>!e.isHidden)).map((e=>{const{id:i,props:c,type:o}=e,a=(0,H.d)(o);if(!a)return;const{Component:d}=a,r=A,l=O,p=b()({[r]:!0,[l]:i===t});return(0,y.jsx)("div",{className:p,onClick:()=>{n(i),s(o)},children:(0,y.jsx)("div",{className:U,children:(0,y.jsx)(d,{...c})})},i)}))})};var M=n(56335),D=n(57184),E=n(28641),G=n(70734);const{Title:J}=x.default,R=e=>{const{selectedComponentId:t,setSelectedComponentId:n,setSelectedComponentType:c}=e,{id:o=""}=(0,a.UO)(),[d,r]=(0,s.useState)(0),[l,p]=(0,s.useState)([]),[x,u]=(0,s.useState)(1),[j,m]=(0,s.useState)(10),{componentList:h}=(0,F.Z)(),{loading:C}=(0,E.Z)((async()=>await async function(e,t){const n="/api/stat/".concat(e);return await G.Z.get(n,{params:t})}(o,{page:x,pageSize:j})),{refreshDeps:[x,j],onSuccess(e){const{total:t,records:n=[]}=e;r(t),p(n)}}),_=h.map((e=>{const{id:s,title:i,props:o,type:a}=e,d=o.title||i;return{title:(0,y.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{n(s),c(a)},children:(0,y.jsx)("span",{style:{color:s===t?"#1890ff":"inherit"},children:d})}),dataIndex:s}}));const f=function(e){const t=[];for(const n of e){const e=n.identification;if(!t.some((t=>t.identification===e))){const n={identification:e};t.push(n)}(t.find((t=>t.identification===e))||[])[n.id]=n.answerContent}return t}(l).map((e=>({...e,key:e.identification}))),S=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(M.Z,{columns:_,dataSource:f,pagination:!1}),(0,y.jsx)("div",{style:{marginTop:"20px",textAlign:"center"},children:(0,y.jsx)(D.Z,{total:d,pageSize:j,current:x,onChange:e=>u(e),onShowSizeChange:(e,t)=>{u(e),m(t)}})})]});return(0,y.jsxs)("div",{children:[(0,y.jsxs)(J,{level:3,children:["\u7b54\u5377\u6570\u91cf: ",!C&&d]}),C&&(0,y.jsx)("div",{style:{textAlign:"center"},children:(0,y.jsx)(i.Z,{})}),!C&&S]})},{Title:V}=x.default,W=e=>{const{selectedComponentId:t,selectedComponentType:n}=e,{id:i=""}=(0,a.UO)(),[c,o]=(0,s.useState)([]),{run:d}=(0,E.Z)((async(e,t)=>await async function(e,t){const n="/api/stat/".concat(e,"/").concat(t);return await G.Z.get(n)}(e,t)),{manual:!0,onSuccess(e){o(e.stat)}});return(0,s.useEffect)((()=>{t&&d(i,t)}),[i,t]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(V,{level:3,children:"\u56fe\u8868\u7edf\u8ba1"}),(0,y.jsx)("div",{children:function(){if(!t)return(0,y.jsx)("div",{children:"\u672a\u9009\u4e2d\u7ec4\u4ef6"});const{StatComponent:e}=(0,H.d)(n)||{};return e?(0,y.jsx)(e,{stat:c}):(0,y.jsx)("div",{children:"\u8be5\u7ec4\u4ef6\u65e0\u7edf\u8ba1\u56fe\u8868"})}()})]})},Y=()=>{const{loading:e}=(0,r.Z)(),{isPublished:t,title:n}=(0,l.Z)(),p=(0,a.s0)(),[x,u]=(0,s.useState)(""),[j,m]=(0,s.useState)("");(0,d.Z)("\u95ee\u5377\u7edf\u8ba1 - "+n);const h=(0,y.jsx)("div",{style:{textAlign:"center",marginTop:"60px"},children:(0,y.jsx)(i.Z,{})});return(0,y.jsxs)("div",{className:I,children:[(0,y.jsx)(w,{}),(0,y.jsxs)("main",{className:N,children:[e&&h,!e&&(0,y.jsx)("div",{className:k,children:"boolean"!==typeof t||t?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:T,children:(0,y.jsx)(K,{selectedComponentId:x,setSelectedComponentId:u,setSelectedComponentType:m})}),(0,y.jsx)("div",{className:P,children:(0,y.jsx)(R,{selectedComponentId:x,setSelectedComponentId:u,setSelectedComponentType:m})}),(0,y.jsx)("div",{className:q,children:(0,y.jsx)(W,{selectedComponentId:x,selectedComponentType:j})})]}):(0,y.jsx)(c.ZP,{status:"warning",title:"\u60a8\u8bbf\u95ee\u7684\u95ee\u5377\u672a\u53d1\u5e03",extra:(0,y.jsx)(o.ZP,{type:"primary",onClick:()=>p(-1),children:"\u8fd4\u56de"})})})]})]})}}}]);
//# sourceMappingURL=StatPage.a237472f.chunk.js.map